function setErrorMessage(e){errorMessage=e}function init(){var e;function t(){var e=!1;return window.PointerEvent&&"maxTouchPoints"in navigator?navigator.maxTouchPoints>0&&(e=!0):window.matchMedia&&window.matchMedia("(any-pointer:coarse)").matches?e=!0:(window.TouchEvent||"ontouchstart"in window)&&(e=!0),e}$(document).find("textarea").on("input change propertychange",function(){var t=$(this).attr("pattern");if(void 0!==t&&!1!==t){var i=new RegExp("^"+t.replace(/^\^|\$$/g,"")+"$","g"),n=$(this).val().replace(/[\r\n]+/gm,"");e=!n.match(i),"function"==typeof this.setCustomValidity?this.setCustomValidity(e?errorMessage:""):($(this).toggleClass("error",!!e),$(this).toggleClass("ok",!e),e?$(this).attr("title",errorMessage):$(this).removeAttr("title"))}});var i=[];t()||$(".select select").each(function(){i[this.id]=new SlimSelect({select:"#"+this.id,placeholder:"Choose one..."})}),$(".is-multiple select").each(function(){i[this.id]=new SlimSelect({select:"#"+this.id,placeholder:"Choose many..."})}),$("#register").on("submit",function(e){e.preventDefault(),$("[name='nonce']").length||$("<input>").attr("type","hidden").attr("name","nonce").attr("value",formToken).appendTo("#register");var t=new FormData(e.target);$(".button-register").addClass("is-loading");var i=$(this).find("input, select, button, textarea");return i.prop("disabled",!0),axios.post($(this).attr("action"),t).then(function(e){var t,i=$("#form-container"),n=$("#webinar-success"),o=$("a.join-url"),a=(t=$(".webinar-date-mobile")).offsetWidth>0&&t.offsetHeight>0?$(".webinar-date-mobile"):$(".webinar-date-desktop"),r=$(a,".webinar-times li:first");o.attr("href",e.data.join_url),o.html(e.data.join_url),r.length?$(".webinar-join-date").html("<strong>Date:</strong> "+r.clone().text()):$(".webinar-join-date").html("<strong>Date:</strong> "+$(a,"p").clone().text()),$("#form-error").hide(),i.addClass("is-hidden"),n.removeClass("is-hidden")}).catch(function(e){var t=$("#form-error");void 0!==e.response.data&&e.response.data.code&&(t.html('Sorry, there was an error with your registration. Please contact <a href="mailto:&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#064;&#099;&#121;&#098;&#101;&#114;&#115;&#105;&#103;&#104;&#116;&#046;&#111;&#114;&#103;">support@cybersight.org</a> for help.'),t.removeClass("is-hidden"),t[0].scrollIntoView())}).then(function(){i.prop("disabled",!1),$(".button-register").removeClass("is-loading")}),!1}),$(".timezone-switcher").on("click",function(e){console.log("********timezone *****"),e.preventDefault(),$("#timezone-modal").addClass("is-active"),$("html").addClass("is-clipped")}),$(".modal-cancel").on("click",function(e){console.log("********timezone *****"),e.preventDefault(),$("#timezone-modal").removeClass("is-active"),$("html").removeClass("is-clipped")}),$("#switch-timezone").on("click",function(e){e.preventDefault();var n=window.location.pathname;n=n.substring(0,n.indexOf("tz/"));var o=t()?$("#switch-time-zone").val():i["switch-time-zone"].selected();window.location.pathname=n?n+"tz/"+o:window.location.pathname+"/tz/"+o})}$(window).on("load",function(){init()});